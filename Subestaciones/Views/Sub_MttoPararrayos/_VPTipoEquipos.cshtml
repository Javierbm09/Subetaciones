@model Subestaciones.Models.Clases.Sub_MttoPararrayosModel


@Html.LabelFor(model => model.MttoPararrayos.TequipoProt, htmlAttributes: new { @class = "control-label " })
@Html.DropDownListFor(model => model.MttoPararrayos.TequipoProt, ViewBag.TipoEquipoProtegido as SelectList, "Seleccione un elemento de la lista", htmlAttributes: new { @class = "form-control select2" })
@Html.ValidationMessageFor(model => model.MttoPararrayos.TequipoProt, "", new { @class = "text-danger" })


<script>
    $(".select2").select2({
        placeholder: "Seleccione un elemento de la lista"
    });

    function cargarEquiposProtegidos() {
        var subestacion = $("#MttoPararrayos_subestacion").val();
        var tipoEquipo = $("#MttoPararrayos_TequipoProt").val();
        if (tipoEquipo == "T") {
            cargarVoltajesInstalados();
            $("#div-voltaje").show();
        } else {
            $("#div-voltaje").hide();
        }
        $.ajax({
            url: '@Url.Action("VPEquipos", "Sub_MttoPararrayos")',
            method: "POST",
            data: { subestacion: subestacion, tipoEquipo: tipoEquipo },
            success: function (data) {
                $('#div-equipos').html(data);
            }
        });
    }

    function cargarVoltajesInstalados() {
        var subestacion = $("#MttoPararrayos_subestacion").val();
        $.ajax({
            url: '@Url.Action("VPVoltajeInstalado", "Sub_MttoPararrayos")',
            method: "POST",
            data: { subestacion: subestacion },
            success: function (data) {
                $('#div-voltaje').html(data);
            }
        });
    }

    cargarEquiposProtegidos();

    $("#MttoPararrayos_TequipoProt").change(function () {
        $('.grupo-fase-a').show();
        $('.grupo-fase-b').show();
        $('.grupo-fase-c').show();
        $('#NumSerieFaseA').val('');
        $('#NumSerieFaseB').val('');
        $('#NumSerieFaseC').val('');
        $('#TipoParaFaseA').val('');
        $('#TipoParaFaseB').val('');
        $('#TipoParaFaseC').val('');
        cargarEquiposProtegidos();
    });
</script>