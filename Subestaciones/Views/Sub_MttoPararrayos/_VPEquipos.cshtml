@model Subestaciones.Models.Clases.Sub_MttoPararrayosModel


@Html.LabelFor(model => model.MttoPararrayos.CodigoEquipoProtegido, htmlAttributes: new { @class = "control-label" })
@Html.DropDownListFor(model => model.MttoPararrayos.CodigoEquipoProtegido, ViewBag.ListaEquiposProtegidos as SelectList, "Seleccione un elemento de la lista", htmlAttributes: new { @class = "form-control select2" })
@Html.ValidationMessageFor(model => model.MttoPararrayos.CodigoEquipoProtegido, "", new { @class = "text-danger" })


<script>
    $(".select2").select2({
        placeholder: "Seleccione un elemento de la lista"
    });

    function CargarDatosFases() {
        var tipoEquipo = $("#MttoPararrayos_TequipoProt").val();
        var codigoEquipo = $("#MttoPararrayos_CodigoEquipoProtegido").val();
        $.ajax({
            url: '@Url.Action("DatosFases", "Sub_MttoPararrayos")',
            method: "POST",
            data: { tipo: tipoEquipo, codigo: codigoEquipo },
            success: function (data) {
                $('#NumSerieFaseA').val(data.fans);
                $('#NumSerieFaseB').val(data.fbns);
                $('#NumSerieFaseC').val(data.fcns);
                $('#TipoParaFaseA').val(data.fatp);
                $('#TipoParaFaseB').val(data.fbtp);
                $('#TipoParaFaseC').val(data.fctp);
                MostrarFases(data.fans != "", data.fbns != "", data.fcns != "");
            }
        });
    }

    function MostrarFases(a, b, c) {
        if (a) {
            $('.grupo-fase-a').show();
        } else {
            $('.grupo-fase-a').hide();
        }
        if (b) {
            $('.grupo-fase-b').show();
        } else {
            $('.grupo-fase-b').hide();
        }
        if (c) {
            $('.grupo-fase-c').show();
        } else {
            $('.grupo-fase-c').hide();
        }
    }

    $("#MttoPararrayos_CodigoEquipoProtegido").change(function () {
        CargarDatosFases();
    });
</script>